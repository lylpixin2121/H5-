H5专题流程分享

> 日常工作中，H5专题的开发 项目组给我们提供了很多支援和帮助，但是粗犷式的开发 也暴露出了一些在工作流程上的一些问题，回溯到页面最本质的东西 我们对流程还是要有一个清晰的认知，我们做一个页面 从不可或缺的部分 到插件的选择 心里都要有一个标准

### 制作流程篇：

- 1、确认设计稿，确认各个环节 的交互和实现 是否存在疑点 及时沟通 需要设计调整的就调整 需要不合理的地方就改需求

- 2、滑屏组件的选择，目前使用的比较广泛的有swipe【学敏版】、iscroll.js、swiper、for_zj【彦龙版】，插件的选择无对错，但是插件的选择 首先取决于你对这个插件的了解程度，程度取决于在你分析页面的时候 知道会涉及到那些用户刚性的需求点，从而选择处理这些业务的最佳解决方案，之所以放到第二部讲 好的开头成功一半

- 3、码页面  采用动态meta的方式来布局，不用采用百分比布局的方式，能极大的降低你计算的成本，
注意点：特别留意需求是否要放到APP，如果是，就不能用webview 缩放的方式来处理，出来的效果比原来大一般，即不会随着设备宽度缩放

```
// 此处添加如下js 可以避免二倍图和百分比定位造成的不便
	if(/Android (\d+\.\d+)/.test(navigator.userAgent)){
    var version = parseFloat(RegExp.$1);
    if(version>2.3){
        var phoneScale = parseInt(window.screen.width)/640;
        document.write('<meta name="viewport" content="width=640, minimum-scale = '+ phoneScale +', maximum-scale = '+ phoneScale +', target-densitydpi=device-dpi">');
    }else{
        document.write('<meta name="viewport" content="width=640, target-densitydpi=device-dpi">');
    }
	}else{
    document.write('<meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi,minimal-ui">');
	}
```

- 4、**养成先写页面 后补效果的习惯**，效果的调试过程 还是需要花费时间的

- 5、根据页面的需要 如果效果的需求量比较大同时可以大部分基于一个成熟的组件来完成 可以考虑直接引入animate.css，经过验证的相对成熟的组件 兼容性较好，手写会出现一些误差 导致一些前缀忘记添加 导致效果出不来，遇到过得坑 又人手写 结果忘记了-webkit-transform的前缀 就导致 页面效果出不来 调试问题 看半天还在找 是页面的问题 还是 css问题、脚本问题

- 6、**不要忘记了微信分享部分**，页面微信分享的问题，跟编辑至少要一张200*200的 正方形图，同时需要以外链形式填充，并且只有当整个专题上传以后 才能正常使用，切记是外链！！	

- 7、协同配合阶段  尤其是时间紧迫的加急单 在处理协同操作的时候   必要时候记好**修改文档** 做到能在很短的时间会退到上一个版本 ， 做好**备份**  避免覆盖操作 误人误己

- 8、最后 给必要的页面 添加**loading初始页**（这个也是可以再初期进行评估的）

---
### 技巧篇：

制作技巧：
- 1、H5专题的特点一般就是图片内容较多，当页面屏数过多的时候，要学着做好**文件夹分类** 方便后期编辑填充

- 2、**页面效果切的不要过碎**：制作中有人喜欢把页面切的很碎，每个环节都做效果，效果这东西很早期就说过是一个很主观的东西，我们在充分了解了用户的刚需的前提下，适当的加入增强用户体验的交互是好事，但是过多导致的问题就是：

	A：**修改繁琐**：一旦涉及到用户不满意修改会比较麻烦
	B：可能因效果过多，导致页面**显示卡顿 不流畅**的问题
	C：**level提的过高**，专题是有常规专题和精选专题之分，当一个东西 你长时间处于某种阶段状态的时候，突然某一天因为特殊原因，你降了一个层次 那么对习惯了原先的需求来说 就会更多的挑剔于你，这是个循序渐进的过程，当大家有更成熟 更熟练的技能和水平的时候 这个自然慢慢会上去 不易过急
	D：每个人随着工作时间增长和技能水平的提高，接触的事务会越来越多 那么多线程的状态下，可能就很难保持对某样东西100%的投入和产出，精雕细琢的东西是需要时间成本的，但是在**精益求精和工作效率两方面我们自己都要找到一个平衡点**。

沟通技巧：
- 1、需求经常会苛责于我们做的效果不是他们想要的，会经常有返工或者调整的情况，这是一种工作的常态 又是一种让人相对觉得比较头疼的事，如何尽量减少这种情况，当实在久改不满意的时候 可以考虑直接抛给他一些效果地址，让用户挑选一个他们满意的交互，有时候用户也不知道想要什么，只是缺少一个感觉，少一个具象的东西 

- 2、**善于使用身边的各种资源**，不管是技术和人 都是资源的一种 善于借助他们 请教他们来完成东西 不要钻牛角尖

---
### 性能篇：
- 1、在采用loading预加载的方式来处理页面的时候 新手一定要切记一些事件捆绑先后顺序的问题 防止事件丢失 或者元素查找失败
- 2、H5专题 图片量过大，可以通过tinypng的自动化工具进行批量压缩，效果明显10M的图片可以压到3M,下载地址：http://192.168.50.198/images.zip

- 3、手机端在页面渲染和初始化加载 到量上超过一个阀值的时候 就会造成内存溢出，从而导致闪退，那么我们在做的过程中要对一些脚本的性能有一定的了解，适当的做按需加载，尽量不要初始化过多的东西，尽量不要在window.onload上注册太多东西，canvas绘制也是一个很耗性能的东西，尽量做到按需加载

---
### 检查篇：
- 1、检查的过程少不了 除了测完自己机子之外，测试机都是很方便的 测下也是顺手一时 有时候可能就会发现一些问题，比如I6+独有的闪退
- 2、及时跟用户沟通 是否有OA wifi权限，有可以通过ip链接二维码，没有需要上传到外网 不过涉及到手机缓存的问题 就会比较坑一点
- 3、编辑代码填充 有时候会忘记微信分享那块的填充 要及时检查和提醒


